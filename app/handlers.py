from aiogram import F, Router
from aiogram.types import Message, CallbackQuery
from aiogram.filters import CommandStart, Command

import app.keyboards as kb
import app.database.requests as rq
import pytz  # –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ pytz
from datetime import datetime
from aiogram.types import FSInputFile
import os

router = Router()


@router.message(CommandStart())
async def cmd_start(message: Message):
    await rq.set_user(message.from_user.id)
    user_name = message.from_user.first_name
    welcome_message = (f"üåü <strong>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ CashBot!</strong> üåü\n\n"
                       f"–ü—Ä–∏–≤–µ—Ç, {user_name}! –ú—ã —Ä–∞–¥—ã –≤–∏–¥–µ—Ç—å –≤–∞—Å —Å—Ä–µ–¥–∏ –Ω–∞—à–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π!\n\n"
                       f"üí∞ <strong>CashBot</strong> ‚Äî –≤–∞—à –Ω–∞–¥–µ–∂–Ω—ã–π –∫–æ–º–ø–∞–Ω—å–æ–Ω –Ω–∞ –ø—É—Ç–∏ –∫ –∑–∞—Ä–∞–±–æ—Ç–∫—É –æ–Ω–ª–∞–π–Ω. –ó–¥–µ—Å—å –≤—ã –Ω–∞–π–¥–µ—Ç–µ:\n"
                       f"- üìã –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è\n"
                       f"- üéØ –ü–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã\n"
                       f"- üéÅ –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –∏ –±–æ–Ω—É—Å—ã\n"
                       f"- üîç –ê–∫—Ç—É–∞–ª—å–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏ –∏ —Å–æ–≤–µ—Ç—ã –ø–æ –∑–∞—Ä–∞–±–æ—Ç–∫—É\n\n"
                       f"üöÄ <strong>–ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ?</strong>\n"
                       f"- –û–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –∑–∞–¥–∞–Ω–∏—è–º–∏, –≤—ã–±—Ä–∞–≤ –≤–∞—Ä–∏–∞–Ω—Ç '–ó–∞—Ä–∞–±–æ—Ç–∞—Ç—å'.\n"
                       f"- –£–∑–Ω–∞–π—Ç–µ –æ –ø–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∏—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∞—Ö.\n"
                       f"- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–¥–µ–ª '–ú–æ–π –∫–∞–±–∏–Ω–µ—Ç', —á—Ç–æ–±—ã –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Å–≤–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å!\n\n"
                       f"üí¨ –í—Å—Ç—É–ø–∞–π—Ç–µ –≤ –Ω–∞—à —á–∞—Ç, –≥–¥–µ –≤–∞–º –≤—Å–µ–≥–¥–∞ –±—É–¥—É—Ç —Ä–∞–¥—ã! <a href='https://t.me/+PVA49PzAQUQ3MjMy'>–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ —á–∞—Ç—É</a>\n\n"
                       f"–ú—ã –≤—Å–µ–≥–¥–∞ –≥–æ—Ç–æ–≤—ã –ø–æ–º–æ—á—å –≤–∞–º –¥–æ–±–∏—Ç—å—Å—è —É—Å–ø–µ—Ö–∞, —Ç–∞–∫ —á—Ç–æ –Ω–µ —Å—Ç–µ—Å–Ω—è–π—Ç–µ—Å—å –∑–∞–¥–∞–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã!\n\n"
                       f"‚ú® <strong>–ù–∞—á–Ω–∏—Ç–µ –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å!</strong> ‚ú®")
   
    await message.answer(welcome_message, reply_markup=kb.main, parse_mode='HTML')

@router.message(F.text == 'üí∏ –ó–∞—Ä–∞–±–æ—Ç–∞—Ç—å')
async def cmd_task(message: Message):
    # –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è —Ä–∞–∑–¥–µ–ª–∞ "–ó–∞—Ä–∞–±–æ—Ç–∞—Ç—å"
    welcome_task_message = (
        "üíº –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —Ä–∞–∑–¥–µ–ª '–ó–∞—Ä–∞–±–æ—Ç–∞—Ç—å'!\n\n"
        "–ó–¥–µ—Å—å –≤—ã –Ω–∞–π–¥–µ—Ç–µ —Ä–∞–∑–ª–∏—á–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–º–æ–≥—É—Ç –≤–∞–º –Ω–∞—á–∞—Ç—å –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –¥–µ–Ω—å–≥–∏ –æ–Ω–ª–∞–π–Ω –∏ –æ—Ñ—Ñ–ª–∞–π–Ω.\n"
        "–í—ã–±–∏—Ä–∞–π—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–µ –∑–∞–¥–∞–Ω–∏—è –∏ –¥–µ–π—Å—Ç–≤—É–π—Ç–µ, —á—Ç–æ–±—ã —É–≤–µ–ª–∏—á–∏—Ç—å —Å–≤–æ–π –¥–æ—Ö–æ–¥. –£—Å–ø–µ—Ö–æ–≤!"
    )
    
    await message.answer(welcome_task_message)  # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
    await message.answer('–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â–µ–µ –∑–∞–¥–∞–Ω–∏–µ:',reply_markup=kb.task)


@router.callback_query(F.data == 'or')
async def off_work(callback: CallbackQuery):
    await callback.answer('–û—Ç–ª–∏—á–Ω—ã–π –≤—ã–±–æ—Ä!')
    await callback.message.answer('–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è:', reply_markup=kb.offline_keyboard)


@router.callback_query(F.data == 'task1')
async def yandex(callback: CallbackQuery):
    await callback.answer('–û—Ç–ª–∏—á–Ω—ã–π –≤—ã–±–æ—Ä!')
    # URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
    photo_url = "https://i.postimg.cc/BZTdrqbw/220721-Y-eda-0578.png"
    # –¢–µ–∫—Å—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ —Å —Å—Å—ã–ª–∫–æ–π
    text_instruction = (
        "üöÄ **–ü–∞—Ä—Ç–Ω–µ—Ä —Å–µ—Ä–≤–∏—Å–∞ –Ø–Ω–¥–µ–∫—Å –ï–¥–∞ –≤ –ø–æ–∏—Å–∫–∞—Ö –∫—É—Ä—å–µ—Ä–æ–≤!** üöÄ\n"
        "‚ú® –•–æ—á–µ—à—å —Å–∞–º –≤—ã–±–∏—Ä–∞—Ç—å –≤—Ä–µ–º—è –∏ –ª–æ–∫–∞—Ü–∏–∏ –¥–ª—è –¥–æ—Å—Ç–∞–≤–æ–∫?\n\n"
        "üí∞ **–í—ã–ø–ª–∞—Ç—ã:**\n"
        "üíµ –î–ª—è –≤–µ–ª–æ–∫—É—Ä—å–µ—Ä–æ–≤ –¥–æ 3500 ‚ÇΩ –≤ –¥–µ–Ω—å;\n"
        "üéØ –ü–æ–≤—ã—à–µ–Ω–Ω—ã–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞ –∑–∞–∫–∞–∑–∞—Ö –¥–ª—è –≤–µ–ª–æ–∫—É—Ä—å–µ—Ä–æ–≤;\n"
        "üö¥‚Äç‚ôÇÔ∏è –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –ø–∞—Ä—Ç–Ω–µ—Ä—ã —Å–µ—Ä–≤–∏—Å–∞, –≥–¥–µ –≤—ã –º–æ–∂–µ—Ç–µ –∞—Ä–µ–Ω–¥–æ–≤–∞—Ç—å —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç;\n"
        "üéâ –†–∞–∑–ª–∏—á–Ω—ã–µ –∞–∫—Ü–∏–∏ –∏ –±–æ–Ω—É—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–º–æ–≥—É—Ç —É–≤–µ–ª–∏—á–∏—Ç—å –≤–∞—à –¥–æ—Ö–æ–¥!\n\n"
        "üì± –ü–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è —Ç–µ–ª–µ—Ñ–æ–Ω –Ω–∞ –±–∞–∑–µ Android 7 –∏ –≤—ã—à–µ –∏–ª–∏ iPhone —Å –≤–µ—Ä—Å–∏–µ–π iOS –æ—Ç 13.\n\n"
        "ü§ù –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Å—è –∫ –ø–∞—Ä—Ç–Ω–µ—Ä—É —Å–µ—Ä–≤–∏—Å–∞ –Ø–Ω–¥–µ–∫—Å –ï–¥–∞!\n\n"
        "üîç **–ß—Ç–æ –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º?**\n"
        "üïí –ì–∏–±–∫–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –≤—ã –≤—ã–±–∏—Ä–∞–µ—Ç–µ —Å–∞–º–∏;\n"
        "üìç  –£–¥–æ–±–Ω—ã–µ –ª–æ–∫–∞—Ü–∏–∏ –≤ –≥–æ—Ä–æ–¥–µ;\n"
        "üéì –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–≤–º–µ—â–∞—Ç—å —Å —Ä–∞–±–æ—Ç–æ–π –∏–ª–∏ —É—á–µ–±–æ–π.\n\n"
        "ü§ë –î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –≤–∞–∫–∞–Ω—Å–∏–∏: –∑–∞ 100 –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ ~17 500 —Ä—É–±. (–ù–∞ —ç—Ç–æ —É—Ö–æ–¥–∏—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ 7 –¥–Ω–µ–π)\n"
        "üí≤  –ó–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –ø–æ –Ω–∞—à–µ–π —Å—Å—ã–ª–∫–µ –í—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –ø–æ–ª—É—á–∏—Ç–µ 5 000 —Ä—É–±. (–í–∞–∂–Ω–æ: –≤—ã –¥–æ–ª–∂–Ω—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤–ø–µ—Ä–≤—ã–µ!)\n\n" \
        "‚ùì  –ï—Å–ª–∏ –æ—Å—Ç–∞–ª–∏—Å—å –≤–æ–ø—Ä–æ—Å—ã –ø–æ –≤–∞–∫–∞–Ω—Å–∏–∏, –∑–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å –º–µ–Ω–µ–¥–∂–µ—Ä—É @CashBot\n\n"
        "üîó [–ù–∞–∂–º–∏—Ç–µ –∑–¥–µ—Å—å, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É](https://reg.eda.yandex.ru/?advertisement_campaign=forms_for_agents&user_invite_code=0a1e210f18ac4e12a91e6014c98c4a87&utm_content=blank)"
    )
  
    await callback.message.answer_photo(photo=photo_url, caption=text_instruction, parse_mode='Markdown')   


@router.callback_query(F.data == 'task2')
async def burger(callback: CallbackQuery):
    await callback.answer('–û—Ç–ª–∏—á–Ω—ã–π –≤—ã–±–æ—Ä!')
    # URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
    photo_url = "https://i.postimg.cc/VLFNbD8W/300x300.png"
    # –¢–µ–∫—Å—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ —Å —Å—Å—ã–ª–∫–æ–π
    text_instruction = (
        "üçî **–†–∞–±–æ—Ç–∞ –≤ ¬´–ë—É—Ä–≥–µ—Ä –ö–∏–Ω–≥¬ª!** üçî\n\n"
        "üî• **–í–∞–∫–∞–Ω—Å–∏–∏:**\n"
        "üì¶ **–ö–£–†–¨–ï–†:**\n"
        "- –í–æ–∑—Ä–∞—Å—Ç 18+\n"
        "- –í–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–µ –ø—Ä–∞–≤–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ B (–∏–ª–∏ M, A)\n"
        "- –ñ–µ–ª–∞–Ω–∏–µ —É—á–∏—Ç—å—Å—è –∏ —Ä–∞–∑–≤–∏–≤–∞—Ç—å—Å—è\n\n"
        
        "ü•ó **–ü–û–í–ê–†-–ö–ê–°–°–ò–†:**\n"
        "- –ó–Ω–∞–Ω–∏–µ —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞\n"
        "- –í–æ–∑—Ä–∞—Å—Ç 18+\n"
        "- –û–ø—ã—Ç –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω\n\n"
        
        "üí∞ **–ß—Ç–æ –º—ã –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º?**\n"
        "- –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ –≤—ã–ø–ª–∞—Ç—ã –∏ —á–∞–µ–≤—ã–µ\n"
        "- –ë–µ—Å–ø–ª–∞—Ç–Ω–æ–µ –ø–∏—Ç–∞–Ω–∏–µ\n"
        "- –ì–∏–±–∫–∏–π –≥—Ä–∞—Ñ–∏–∫\n\n"
         "üíå **–ù–µ —É–ø—É—Å—Ç–∏ —Å–≤–æ–π —à–∞–Ω—Å!**\n"
        "ü§ë –î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –≤–∞–∫–∞–Ω—Å–∏–∏: –∑–∞ –æ–¥–Ω—É —Å–º–µ–Ω—É –≤—ã –ø–æ–ª—É—á–∏—Ç–µ ~5000 —Ä—É–±. (–í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≥–æ—Ä–æ–¥–∞)\n"
        "üí≤  –ó–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –ø–æ –Ω–∞—à–µ–π —Å—Å—ã–ª–∫–µ –í—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –ø–æ–ª—É—á–∏—Ç–µ 3 000 —Ä—É–±. (–í–∞–∂–Ω–æ: –≤—ã –¥–æ–ª–∂–Ω—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤–ø–µ—Ä–≤—ã–µ!)\n\n" \
        "‚ùì  –ï—Å–ª–∏ –æ—Å—Ç–∞–ª–∏—Å—å –≤–æ–ø—Ä–æ—Å—ã –ø–æ –≤–∞–∫–∞–Ω—Å–∏–∏, –∑–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å –º–µ–Ω–µ–¥–∂–µ—Ä—É @CashBot\n\n"
        "üîó [–ù–∞–∂–º–∏—Ç–µ –∑–¥–µ—Å—å, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É](https://trk.ppdu.ru/click/TPjjlqqS?erid=2SDnjdu6ZqS)"
    )
  
    await callback.message.answer_photo(photo=photo_url, caption=text_instruction, parse_mode='Markdown')  


@router.callback_query(F.data == 'task3')
async def burger(callback: CallbackQuery):
    await callback.answer('–û—Ç–ª–∏—á–Ω—ã–π –≤—ã–±–æ—Ä!')
    # URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
    photo_url = "https://i.postimg.cc/4xQ4hD8B/09cfed52-ab14-4c01-9b26-2d010533ce37.png"
    # –¢–µ–∫—Å—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ —Å —Å—Å—ã–ª–∫–æ–π
    text_instruction = (
        "üöÄ *–í–∞–∫–∞–Ω—Å–∏–∏ –¢-–ë–∞–Ω–∫–∞*\n\n"
        "*–ù–µ –Ω—É–∂–Ω–æ –≤—ã—Å—à–µ–µ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∏–ª–∏ –æ–ø—ã—Ç!*\n"
        "üìû *–ü—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª–∏*\n"
        "üìä *–û–ø–µ—Ä–∞—Ç–æ—Ä—ã –∫–æ–ª–ª-—Ü–µ–Ω—Ç—Ä–∞*\n"
        "üíº *–ú–µ–Ω–µ–¥–∂–µ—Ä—ã –ø–æ –ø—Ä–æ–¥–∞–∂–µ —É—Å–ª—É–≥*\n"
        "üìù *–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–æ–±–æ—Ä–æ—Ç—É*\n"
        "ü§ù *–ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç—ã*\n"
        "üí≥ *–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã –ø–æ –≤–∑—ã—Å–∫–∞–Ω–∏—é*\n"
        "üë• *–†–µ–∫—Ä—É—Ç–µ—Ä—ã*\n\n"
        "üí° *–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞*:\n"
        "- –ì–∏–±–∫–∏–µ –≥—Ä–∞—Ñ–∏–∫–∏ –∏ –¥–æ—Å—Ç–æ–π–Ω–∞—è –∑–∞—Ä–ø–ª–∞—Ç–∞.\n"
        "- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ –æ–±—É—á–µ–Ω–∏–µ –æ—Ç –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫–æ–≤.\n"
        "- –ü–µ—Ä—Å–ø–µ–∫—Ç–∏–≤—ã –∫–∞—Ä—å–µ—Ä–Ω–æ–≥–æ —Ä–æ—Å—Ç–∞.\n\n"
        "üõ§Ô∏è *–ü—É—Ç—å –∫–∞–Ω–¥–∏–¥–∞—Ç–∞*:\n"
        "- –ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ —Å—Å—ã–ª–∫–µ –Ω–∏–∂–µ.\n"
        "- –í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥ –∏ –≤–∞–∫–∞–Ω—Å–∏—é.\n"
        "- –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –∏ –ø—Ä–æ–π–¥–∏—Ç–µ –æ–±—É—á–µ–Ω–∏–µ.\n\n"
        "üíº *–°–¥–µ–ª–∞–π—Ç–µ —à–∞–≥ –∫ –Ω–æ–≤–æ–π –∫–∞—Ä—å–µ—Ä–µ –≤ –¢-–ë–∞–Ω–∫–µ!*\n"
        "üí≤ –ó–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –ø–æ –Ω–∞—à–µ–π —Å—Å—ã–ª–∫–µ –í—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –ø–æ–ª—É—á–∏—Ç–µ 2500 —Ä—É–±.\n\n"
        "‚ùì –ï—Å–ª–∏ –æ—Å—Ç–∞–ª–∏—Å—å –≤–æ–ø—Ä–æ—Å—ã –ø–æ –≤–∞–∫–∞–Ω—Å–∏–∏, –∑–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å –º–µ–Ω–µ–¥–∂–µ—Ä—É @CashBot\n\n"
        "üîó [–ù–∞–∂–º–∏—Ç–µ –∑–¥–µ—Å—å, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É](https://trk.ppdu.ru/click/3uNod0HC?erid=2SDnjcbs16H)"

    )
  
    await callback.message.answer_photo(photo=photo_url, caption=text_instruction, parse_mode='Markdown') 


@router.callback_query(F.data == 'rewards')
async def send_rewards(callback: CallbackQuery):
    await callback.answer('–§–∞–π–ª –∑–∞–≥—Ä—É–∂–µ–Ω')
    
    # –ü–æ–ª—É—á–∞–µ–º –∞–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É
    file_path = os.path.join(os.path.dirname(os.path.abspath(__file__)), '–í–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏—è.xlsx')
    
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞
    if not os.path.exists(file_path):
        await callback.message.answer("–§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω–Ω.")
        print("–§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω:", file_path)  # –î–ª—è –æ—Ç–ª–∞–¥–∫–∏
        return
    
    # –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ FSInputFile
    input_file = FSInputFile(file_path)
    
    # –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–∞–π–ª–∞ Excel
    await callback.message.answer_document(input_file)



@router.callback_query(F.data == 'pz')
async def pz_pz(callback: CallbackQuery):
    await callback.answer('–û—Ç–ª–∏—á–Ω—ã–π –≤—ã–±–æ—Ä!')
    partner_tasks_text = (
        "üåü <strong>–ü–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∏–µ –∑–∞–¥–∞–Ω–∏—è</strong> üåü\n\n"
        "–î–∞–Ω–Ω—ã–π —Ä–∞–∑–¥–µ–ª –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤:\n"
        "üí≥ <strong>–î–µ–±–µ—Ç–æ–≤—ã–µ –∏ –∫—Ä–µ–¥–∏—Ç–Ω—ã–µ –∫–∞—Ä—Ç—ã</strong>\n"
        "üí≥ <strong>–ü–ª–∞—Ç–µ–∂–Ω—ã–µ —Å—Ç–∏–∫–µ—Ä—ã</strong>\n"
        "üè¶ <strong>–í–∫–ª–∞–¥—ã</strong>\n"
        "üöó <strong>–û–°–ê–ì–û</strong>\n"
        "–∏ –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ!\n\n"
        "–ß—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∑–∞–¥–∞–Ω–∏–π, –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É <strong>\"–ü–µ—Ä–µ–π—Ç–∏ –≤ –≤–∏—Ç—Ä–∏–Ω—É\"</strong>. üìã\n\n"
        "üîç –í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–æ–≥–æ, –∫–∞–∫—É—é –∫–∞—Ä—Ç—É –≤—ã –≤—ã–±—Ä–∞–ª–∏, –Ω–∞—à –±–æ—Ç –≤—ã–ø–ª–∞—á–∏–≤–∞–µ—Ç <strong>–±–æ–Ω—É—Å—ã</strong>! \n"
        "üí∞ –°—É–º–º—É –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞ –º–æ–∂–Ω–æ —Å–∫–∞—á–∞—Ç—å, –Ω–∞–∂–∞–≤ –Ω–∞ –∫–Ω–æ–ø–∫—É <strong>\"–í–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏—è\"</strong>."
    )
    await callback.message.answer(partner_tasks_text, parse_mode='HTML', reply_markup=kb.partnerprogram)

@router.message(F.text == 'üì± –ú–æ–π –∫–∞–±–∏–Ω–µ—Ç')
async def cmd_lk(message: Message):
    tg_id = message.from_user.id  # –ü–æ–ª—É—á–∞–µ–º Telegram ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    user_data = await rq.get_user_data(tg_id)  # –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –ë–î

     # –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞
    welcome_lk_message = (
        "üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç!\n\n"
        "–ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Å–≤–æ—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∏ –±–∞–ª–∞–Ω—Å, –∞ —Ç–∞–∫–∂–µ –≤—ã–≤–æ–¥–∏—Ç—å –∑–∞—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞.\n"
        "–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –∑–Ω–∞–∫–æ–º—ã —Å–æ –≤—Å–µ–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç CashBot!"
    )

    if user_data:
        # –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –¥–∞—Ç—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤ –º–æ—Å–∫–æ–≤—Å–∫–æ–µ –≤—Ä–µ–º—è, –µ—Å–ª–∏ –æ–Ω–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
        registration_time = user_data['data_registration'].astimezone(pytz.timezone('Europe/Moscow'))

        # –í—ã—á–∏—Å–ª—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –≤ –±–æ—Ç–µ
        now_msk = datetime.now(pytz.timezone('Europe/Moscow'))  # –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è –≤ –ú–°–ö
        days_in_bot = (now_msk - registration_time).days


        await message.answer(welcome_lk_message)  # –û—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
        await message.answer(
            f'üì± –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç:\n‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ\n'
            f'üÜî –ú–æ–π ID: {user_data["tg_id"]}\n'
            f'üïú –î–Ω–µ–π –≤ –±–æ—Ç–µ: {days_in_bot}\n'
            f'‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ\n'
            f'‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ:\n'
            f'üëÅ –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∫–ª–∞–º—ã: {user_data["ads_viewed"]}\n'
            f'üìù –ù–∞–ø–∏—Å–∞–Ω–∏–µ –æ—Ç–∑—ã–≤–æ–≤: {user_data["reviews_written"]}\n'
            f'üë§ –ü–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∏–µ –∑–∞–¥–∞–Ω–∏—è: {user_data["partner_tasks_completed"]}\n'
            f'üè≠ –û—Ñ—Ñ–ª–∞–π–Ω —Ä–∞–±–æ—Ç–∞: {user_data["offline_tasks_completed"]}\n'
            f'‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ\n'
            f'üí≥ –ë–∞–ª–∞–Ω—Å:\n'
            f'‚óè –û—Å–Ω–æ–≤–Ω–æ–π: {user_data["balance"]}\n'
            f'‚óè –í—ã–≤–µ–¥–µ–Ω–æ: {user_data["withdrawn"]}\n',
            reply_markup=kb.withdraw
        )
    else:
        await message.answer("üî¥ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.")



@router.message(F.text == 'üÜò –û –±–æ—Ç–µ | –ü–æ–º–æ—â—å')
async def help_section(message: Message):
    help_text = (
        "ü§ñ <strong>–û –±–æ—Ç–µ</strong>\n"
        "–Ø –±–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–≥–∞–µ—Ç –≤–∞–º –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –¥–µ–Ω—å–≥–∏ –æ–Ω–ª–∞–π–Ω, –≤—ã–ø–æ–ª–Ω—è—è —Ä–∞–∑–ª–∏—á–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è.\n"
        "–í–æ—Ç —á—Ç–æ —è –º–æ–≥—É:\n"
        "- üìã –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è\n"
        "- üéÅ –ò–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –æ –ø–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∏—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∞—Ö\n"
        "- üí¨ –û—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –≤–∞—à–∏ –≤–æ–ø—Ä–æ—Å—ã\n"
        "- üíº –û–±–µ—Å–ø–µ—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –≤–∞—à–µ–º—É –ª–∏—á–Ω–æ–º—É –∫–∞–±–∏–Ω–µ—Ç—É\n\n"
        "<strong>–ö–∞–∫ —è –º–æ–≥—É –ø–æ–º–æ—á—å –≤–∞–º?</strong>"
    )
    await message.answer(help_text, reply_markup=kb.help_keyboard, parse_mode='HTML')


@router.message(F.text == "–ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã (FAQ)")
async def faq(message: Message):
    faq_text = (
        "‚ùì <strong>–ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã:</strong>\n"
        "1. –ö–∞–∫ –Ω–∞—á–∞—Ç—å –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å –±–æ—Ç–æ–º?\n   - –ü—Ä–æ—Å—Ç–æ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–¥–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ —è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é.\n"
        "2. –ö–∞–∫ –≤—ã–≤–µ—Å—Ç–∏ –∑–∞—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –¥–µ–Ω—å–≥–∏?\n   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª –≤—ã–≤–æ–¥–∞ —Å—Ä–µ–¥—Å—Ç–≤ –≤ –ø—Ä–æ—Ñ–∏–ª–µ.\n"
        "3. –ö–∞–∫ —Å–≤—è–∑–∞—Ç—å—Å—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π?\n   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª '–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è'."
    )
    await message.answer(faq_text, parse_mode='HTML')

@router.message(F.text == "–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∏ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞")
async def instructions(message: Message):
    instructions_text = (
        "üìú <strong>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –±–æ—Ç–∞:</strong>\n"
        "1. –í—ã–±–µ—Ä–∏—Ç–µ –∑–∞–¥–∞–Ω–∏–µ –∏–∑ —Å–ø–∏—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö.\n"
        "2. –û–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å —É—Å–ª–æ–≤–∏—è–º–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.\n"
        "3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–¥–∞–Ω–∏–µ –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç.\n"
        "4. –ü–æ–ª—É—á–∏—Ç–µ –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ –Ω–∞ –≤–∞—à –±–∞–ª–∞–Ω—Å."
    )
    await message.answer(instructions_text, parse_mode='HTML')

@router.message(F.text == "–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è")
async def contact_info(message: Message):
    contact_text = (
        "üìû <strong>–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:</strong>\n"
        "- –ù–∞–ø–∏—à–∏—Ç–µ –Ω–∞ email: cashbot.officiall@gmail.com\n"
        "- –ù–∞–ø–∏—à–∏—Ç–µ –≤ –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É: @CashBot_admin\n"
        "- –ó–∞–¥–∞–≤–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å—ã <a href='https://t.me/+PVA49PzAQUQ3MjMy'>–≤ —á–∞—Ç–µ</a>"
    )
    await message.answer(contact_text, parse_mode='HTML')


@router.message(F.text == "–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏")
async def privacy_policy(message: Message):
    privacy_text = (
        "üîí <strong>–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏:</strong>\n"
        "–ú—ã –∑–∞–±–æ—Ç–∏–º—Å—è –æ –≤–∞—à–µ–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ –∏ –Ω–µ –ø–µ—Ä–µ–¥–∞–µ–º –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ —Ç—Ä–µ—Ç—å–∏–º –ª–∏—Ü–∞–º."
    )
    await message.answer(privacy_text, parse_mode='HTML')




@router.message(F.text == "–ù–∞–∑–∞–¥")
async def back_to_menu(message: Message):
   await message.answer(text="–í—ã –≤–µ—Ä–Ω—É–ª–∏—Å—å –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é.", reply_markup=kb.main)    